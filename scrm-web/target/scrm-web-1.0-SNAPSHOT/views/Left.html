<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Title</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="with=device-with,initial-scale=1">

    <link rel="stylesheet" type="text/css" th:href="@{/resources/css/left.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/resources/css/layui.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/resources/css/modules/layer/default/layer.css}">

    <script type="text/javascript" th:src="@{/resources/js/jquery.min.js}"></script>
    <script type="text/javascript" th:src="@{/resources/js/layui.js}" charset="UTF-8"></script>
    <script type="text/javascript" th:src="@{/resources/layer/layer.js}"></script>

    <!--设置图标:<i class="layui-icon layui-icon-app" style="color: #c12e2a"></i>-->

</head>
<body>
<div id="left">
    <ul class="layui-nav layui-nav-tree layui-inline" lay-filter="demo" id="muul" style="margin-right: 10px;width: 100%">
        <li class="layui-nav-item layui-nav-itemed">
            <a href="javascript:;" id="baseInfo">基础信息</a>
            <dl class="layui-nav-child">
                <dd  id="user"><a th:href="@{/user}">人员信息</a></dd>
                <dd  id="power"><a th:href="@{/power}">权限信息</a></dd>
                <dd  id="basedata"><a th:href="@{/basedata}">基础设置</a></dd>
                <dd  id="setpw" onclick="opensetpw()"><a href="#">口令设置</a></dd>
            </dl>
        </li>
        <li class="layui-nav-item">
            <a href="javascript:;">业务信息</a>
            <dl class="layui-nav-child">
                <dd id="custom"><a th:href="@{/left}">客户信息</a></dd>
                <dd id="customInfo"><a th:href="@{/main}">客户资料</a></dd>
            </dl>
        </li>
        <li class="layui-nav-item">
            <a href="javascript:;">运维信息</a>
            <dl class="layui-nav-child">
                <dd id="mainInfo"><a th:href="@{/maintain}">客户运维</a></dd>
                <dd id="signInfo"><a th:href="@{/findContract}">合同签订</a></dd>
                <dd id="ordermain"><a th:href="@{/findOrderMaintain}">服务记录单</a></dd>
                <dd id="devInfo"><a th:href="@{/devmain}">开发运维</a></dd>
            </dl>
        </li>
        <li class="layui-nav-item">
            <a href="javascript:;">统计信息</a>
            <dl class="layui-nav-child">
                <dd id="reportInfo"><a th:href="@{/report}">业务报表</a></dd>
                <dd id="chartInfo"><a th:href="@{/chart}">业务分析</a></dd>
                <dd id="reportInfoDev"><a th:href="@{/maintainQuery}">开发报表</a></dd>
                <dd id="chartInfoDev"><a th:href="@{/maintainChart}">开发分析</a></dd>
            </dl>
        </li>
    </ul>
</div>
</body>

<script>
    layui.use('element', function(){
        var element = layui.element; //导航的hover效果、二级菜单等功能，需要依赖element模块

        //监听导航点击
        element.on('nav(demo)', function(elem){

        });
    });
</script>

<script th:inline="javascript" type="text/javascript">
    /*<![CDATA[*/
    var use = [[${session.user.getUSE002()}]];
    if(use!="系统管理员"){
        if (use == null || use != "系统管理员") {
            $("#power").attr("style", "display:none");
        }
        var other = [[${session.authorities}]];
        if (other == null) {
            $("#user").attr("style", "display:none");
            $("#custom").attr("style", "display:none");
            $("#customInfo").attr("style", "display:none");
            $("#reportInfo").attr("style", "display:none");
        } else {
            var result = "";
            var datare = "";
            var datare1 = "";
            var datare2 = "";
            var datare3 = "";
            var datare4 = "";
            var datare5 = "";
            var datare6="";
            var datare7="";
            var datare8="";
            var datare9="";
            var datare10="";
            for (var i = 0; i < other.length; i++)  {
                if (other[i][2] == "人员信息") {
                    // $("#user").attr("style", "display:none");
                    result = "1";
                }
                if (other[i][2] == "基础设置") {
                    // $("#basedata").attr("style", "display:none");
                    datare7 = "1";
                }
                if (other[i][2] == "客户信息") {
                    // $("#custom").attr("style", "display:none");
                    datare = "1";
                }
                if (other[i][2] == "客户资料"){
                    // $("#customInfo").attr("style", "display:none");
                    datare1 = "1";
                }
                if (other[i][2] == "客户运维"){
                    // $("#mainInfo").attr("style", "display:none");
                    datare3 = "1";
                }
                if (other[i][2] == "合同签订") {
                    // $("#signInfo").attr("style", "display:none");
                    datare5 = "1";
                }
                if (other[i][2] == "服务记录单") {
                    // $("#ordermain").attr("style", "display:none");
                    datare6 = "1";
                }
                if (other[i][2] == "业务报表") {
                    // $("#reportInfo").attr("style", "display:none");
                    datare2 = "1";
                }
                if (other[i][2] == "业务分析") {
                    // $("#chartInfo").attr("style", "display:none");
                    datare4 = "1";
                }
                if (other[i][2] == "开发运维") {
                    // $("#devInfo").attr("style", "display:none");
                    datare8 = "1";
                }
                if (other[i][2] == "开发报表") {
                    // $("#devInfo").attr("style", "display:none");
                    datare9 = "1";
                }
                if (other[i][2] == "开发分析") {
                    // $("#devInfo").attr("style", "display:none");
                    datare10 = "1";
                }
            }
            if (result != "1")
                $("#user").attr("style", "display:none");
            if (datare != "1")
                $("#custom").attr("style", "display:none");
            if (datare1 != "1")
                $("#customInfo").attr("style", "display:none");
            if (datare2 != "1")
                $("#reportInfo").attr("style", "display:none");
            if (datare3 != "1")
                $("#mainInfo").attr("style", "display:none");
            if (datare4 != "1")
                $("#chartInfo").attr("style", "display:none");
            if (datare5 != "1")
                $("#signInfo").attr("style", "display:none");
            if (datare6 != "1")
                $("#ordermain").attr("style", "display:none");
            if (datare7 != "1")
                $("#basedata").attr("style", "display:none");
            if (datare8 != "1")
                $("#devInfo").attr("style", "display:none");
            if (datare9 != "1")
                $("#reportInfoDev").attr("style", "display:none");
            if (datare10 != "1")
                $("#chartInfoDev").attr("style", "display:none");
        }
    }
    /*]]>*/
</script>

<script>
    function opensetpw() {
        layer.open({
            type: 2,
            title: '口令设置',
            maxmin: true,
            shadeClose: true, //点击遮罩关闭层
            area: ['350px', '300px'],
            content: 'setpw',
            btn: ['确定', '取消'],
            success: function (layero, index) {
            },
            yes: function (index, layero) {
                var res = $(layero).find("iframe")[0].contentWindow.getPw();
                $.ajax({
                    type:'post',
                    url:encodeURI( res.data),
                    success:function (data) {
                        if(data){
                            layer.close(layer.index);
                        }else
                            layer.msg("保存失败,请重试");
                    },
                    dataType:'json'
                })
            }
        });
    }
</script>

</html>
